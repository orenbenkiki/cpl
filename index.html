<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CPL: CPL</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CPL
   &#160;<span id="projectnumber">0.2.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CPL </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><em>"Clever people solve problems wise people avoid".</em></p>
<p>The Clever Protection Library (CPL) tries to provide additional safety for C++ projects. For details, see the description of the <code><a href="http://orenbenkiki.github.io/cpl/namespacecpl.html#details">cpl</a></code> namespace in the Doxygen-generated <code><a href="http://orenbenkiki.github.io/cpl">documentation</a></code>.</p>
<h2>Using</h2>
<p>To use CPL, do the following:</p>
<ul>
<li>Include <code><a class="el" href="cpl_8hpp.html" title="Implement the clever protection library (CPL).">cpl.hpp</a></code> in your C++ project.</li>
</ul>
<ul>
<li>Use the <a class="el" href="namespacecpl.html">cpl</a> types instead of the <code>std</code> types.</li>
</ul>
<ul>
<li>Add one of <code>-DCPL_FAST</code> or <code>-DCPL_SAFE</code> to your compilation flags.<ul>
<li>The <code>CPL_FAST</code> variant will compile to code that has no run-time assertions, providing maximal performance.</li>
<li>The <code>CPL_SAFE</code> variant will compile to code that has many run-time assertions, providing maximal safety.</li>
</ul>
</li>
</ul>
<p>By convention, a <code>.fast</code> or <code>.safe</code> suffix is attached to the name of generated libraries and/or binaries to clarify which variant is used.</p>
<h2>Caveats</h2>
<p>Ideally the <code>cpl</code> types would be 100% compatible, drop-in replacements to the <code>std</code> types. In practice this is impossible due to the need to protect built-in standard types like <code>T*</code> and <code>T&amp;</code>. Therefore migration to using CPL requires manually modifying the code.</p>
<p>The fast variant is very unsafe. The safe variant is very slow. Achieving simultaneous safety and speed is extremely difficult, and probably impossible in C++. CPL is an engineering compromise. Look into <a href="http://www.rust-lang.org/">Rust</a> for a new language trying to provide simultaneous safety and speed.</p>
<p>The fast variant is as fast as possible. The safe variant is as safe as possible. Obviously it is also possible to define intermediate points on this spectrum, but currently CPL only provides the two extremes.</p>
<p>The implementation is naive in many ways. Writing an STL-level library in modern C++ is a daunting task: issues such as <code>constexpr</code>, <code>noexcept</code> and perfect forwarding are fiendishly difficult to get right. Even simple <code>const</code>-ness is tricky due to the existence of both <code>const opt&lt;T&gt;</code> and <code>opt&lt;const T&gt;</code>.</p>
<p>The unit tests are a great help in ensuring everything behaves as it should, however they aren't 100% complete so some edge cases might be wrong. It is also difficult to verify the library forbids all sort of invalid code (even though <a class="el" href="test_8cpp.html#ac65fd8adb35b5b64290ed31bc5698d03">MUST_NOT_COMPILE</a> helps a bit). In general CPL is relaxed about this because the safe version will detect any foul play at run-time.</p>
<p>As always, YMMV, no warranty is implied, may contain nuts, etc.</p>
<h2>Building and Installing</h2>
<p>CPL is provided as a single header file so there's no building or installation required - just point the include path of the C++ compiler to the CPL directory. However, CPL does come with a <code>Makefile</code> providing the following goals:</p>
<ul>
<li><code>make all</code> - the default goal updates the source files, compiles and runs the tests, and generates the html documentation.</li>
</ul>
<ul>
<li><code>make src</code> - updates the source files to embed a version string derived from running <code>git</code>, and to enforce a format using <code>clang-format</code>. This will not modify the source files timestamp if no changes are required.</li>
</ul>
<ul>
<li><code>make test</code> - compiles and runs the tests based on the updated sources.</li>
</ul>
<ul>
<li><code>make html</code> - generates HTML documentation using Doxygen based on the updated sources.</li>
</ul>
<ul>
<li><code>make clean</code> - removes all the generated files.</li>
</ul>
<h2>Dependencies</h2>
<p>There are no dependencies for using CPL, other than, of course, the standard C++ libraries. It was developed using <code>g++</code> version 4.9.2 using C++14 constructs, and using <code>clang-format</code> for formatting the source code. CPL does not currently compile under <code>clang</code>, though porting it would make sense.</p>
<p>For building and running its unit tests, CPL uses the delightful <a href="https://github.com/philsquared/Catch">Catch</a> unit tests framework for its tests. Catch is also available as a simple set of header files, the location of which is a configuration parameter in the <code>Makefile</code>.</p>
<h2>License</h2>
<p>CPL is provided under the <a href="http://opensource.org/licenses/MIT">MIT license</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jul 18 2015 08:15:27 for CPL by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
